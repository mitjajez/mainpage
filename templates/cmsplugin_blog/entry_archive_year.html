{% extends "cmsplugin_blog/cmsplugin_blog_base.html" %}
{% load i18n cmsplugin_blog_tags simple_translation_tags %}

{% block title %}Entries for year{{ block.super }}{% endblock %}

{% block left-col %}
<div class="entry-list">
<h1>{% trans "Entries for" %} {{ year }}</h1>
{% if object_list %}
    <ul>
    {% for object in object_list|annotate_with_translations %}
        {% with object.pub_date|date:"F Y" as month %}
            {% ifchanged month %}
                <li>{{ month }}<ul>
            {% endifchanged %}
            {% ifchanged object.pub_date %}
                <li>{{ object.pub_date|date:"d b Y" }}<ul>
            {% endifchanged %}
            {% with object|get_preferred_translation_from_request:request as title %}
                <li><a href="{{ title.get_absolute_url }}">{{ title }}</a> {{ object|render_language_choices:request|safe }}</li>
            {% endwith %}
            {% ifchanged object.pub_date %}
                </ul></li>
            {% endifchanged %}
            {% ifchanged month %}
                </ul></li>
            {% endifchanged %}
        {% endwith %}
    {% endfor %}
    </ul></li>
    </ul>
{% else %}
    <p>{% trans "No entries for this year." %}<p>
{% endif %}
</div>
{% endblock %}

{% block right-col %}
{% render_month_links %}
{% render_tag_links %}
{% endblock %}
